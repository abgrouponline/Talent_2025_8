<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proposal Collection Hub</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; color: white; margin-bottom: 40px; padding: 40px; background: rgba(255,255,255,0.1); border-radius: 20px; }
        .header h1 { font-size: 3em; margin-bottom: 10px; }
        .nav { display: flex; justify-content: center; gap: 20px; margin-bottom: 30px; flex-wrap: wrap; }
        .nav-btn { background: rgba(255,255,255,0.2); color: white; border: none; padding: 12px 24px; border-radius: 25px; cursor: pointer; transition: all 0.3s; }
        .nav-btn:hover, .nav-btn.active { background: rgba(255,255,255,0.3); transform: translateY(-2px); }
        .cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px; }
        .card { background: rgba(255,255,255,0.95); border-radius: 20px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); transition: all 0.3s; cursor: pointer; }
        .card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.3); }
        .card-header { display: flex; align-items: center; margin-bottom: 15px; }
        .card-icon { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-right: 15px; font-size: 24px; color: white; }
        .card-title { font-size: 1.3em; font-weight: 700; color: #333; }
        .card-description { color: #666; line-height: 1.6; margin-bottom: 15px; }
        .card-meta { display: flex; justify-content: space-between; font-size: 0.9em; color: #888; }
        .proposal-view { background: rgba(255,255,255,0.95); border-radius: 20px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); display: none; }
        .back-btn { background: #667eea; color: white; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer; margin-bottom: 20px; }
        .loading { text-align: center; padding: 40px; color: #666; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #667eea; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .proposal-content { max-height: calc(100vh - 200px); overflow-y: auto; }
        .proposal-content::-webkit-scrollbar { width: 8px; }
        .proposal-content::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
        .proposal-content::-webkit-scrollbar-thumb { background: #667eea; border-radius: 4px; }
        .proposal-content::-webkit-scrollbar-thumb:hover { background: #5a6fd8; }
        .icon-education { background: linear-gradient(135deg, #667eea, #764ba2); }
        .icon-government { background: linear-gradient(135deg, #f093fb, #f5576c); }
        .icon-transport { background: linear-gradient(135deg, #4facfe, #00f2fe); }
        .icon-safety { background: linear-gradient(135deg, #43e97b, #38f9d7); }
        .icon-facilities { background: linear-gradient(135deg, #fa709a, #fee140); }
        .icon-it { background: linear-gradient(135deg, #a8edea, #fed6e3); }
        @media (max-width: 768px) { .header h1 { font-size: 2em; } .cards-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìã Proposal Collection</h1>
            <p>Professional Software & Service Proposals for UK Public Sector</p>
        </div>

        <div class="nav">
            <button class="nav-btn active" onclick="showCategory('all')">All Proposals</button>
            <button class="nav-btn" onclick="showCategory('education')">Education</button>
            <button class="nav-btn" onclick="showCategory('government')">Government</button>
            <button class="nav-btn" onclick="showCategory('transport')">Transport</button>
            <button class="nav-btn" onclick="showCategory('safety')">Safety</button>
            <button class="nav-btn" onclick="showCategory('facilities')">Facilities</button>
            <button class="nav-btn" onclick="showCategory('it')">IT Services</button>
        </div>

        <div id="main-content">
            <div id="cards-grid" class="cards-grid"></div>
        </div>

        <div id="proposal-view" class="proposal-view">
            <button class="back-btn" onclick="showMainContent()">‚Üê Back to Proposals</button>
            <div id="proposal-content"></div>
        </div>
    </div>

    <script>
        const proposals = [
            { id: 'website-hosting', title: 'Website Hosting and Development', description: 'Weston College website redesign with CMS implementation and API integration.', category: 'education', icon: 'üéì', iconClass: 'icon-education', file: 'Website Hosting and Development.html', size: '6.9KB', lines: 150, client: 'Weston College' },
            { id: 'tro-management', title: 'Traffic Regulation Order (TRO) Management', description: 'Cloud-based TRO management system with GIS mapping and compliance workflows.', category: 'government', icon: 'üèõÔ∏è', iconClass: 'icon-government', file: 'TRAFFIC REGULATION ORDER (TRO) MANAGEMENT SOFTWARE.html', size: '5.9KB', lines: 147, client: 'Wrexham County Borough Council' },
            { id: 'fleet-management', title: 'Fleet Services Management', description: 'Workshop-centric fleet management system with maintenance tracking and audit trails.', category: 'transport', icon: 'üöó', iconClass: 'icon-transport', file: 'CPU 7040 Fleet Services Management Software System.html', size: '3.7KB', lines: 124, client: 'Council Fleet Services' },
            { id: 'hr-payroll', title: 'HR & Payroll Software', description: 'Comprehensive HR and payroll system with employee self-service and ERP integration.', category: 'education', icon: 'üë•', iconClass: 'icon-education', file: 'City of Wolverhampton College - HR & Payroll Software.html', size: '6.8KB', lines: 164, client: 'City of Wolverhampton College' },
            { id: 'it-support', title: 'IT & Network Support Services', description: 'Comprehensive IT infrastructure management and network support services.', category: 'it', icon: 'üíª', iconClass: 'icon-it', file: 'SHINE Academies Trust ~ IT & Network Support Services Tender.html', size: '5.8KB', lines: 161, client: 'SHINE Academies Trust' },
            { id: 'incident-reporting', title: 'Incident Reporting & Risk Assessment', description: 'Integrated incident reporting system with risk assessment and trend analysis.', category: 'safety', icon: 'üõ°Ô∏è', iconClass: 'icon-safety', file: 'Incident Reporting Software.html', size: '4.7KB', lines: 112, client: 'Weston College Group' },
            { id: 'housing-management', title: 'Housing Management & Rent Collection', description: 'Analytics-driven housing management system with rent collection capabilities.', category: 'government', icon: 'üè†', iconClass: 'icon-government', file: 'Preliminary Market Engagement for Housing Management and Rent Collection Analytics Software for Denbighshire and Flintshire County Councils.html', size: '5.8KB', lines: 149, client: 'Denbighshire and Flintshire County Councils' },
            { id: 'facilities-management', title: 'Facilities Management Software', description: 'Building and asset management software for comprehensive facilities oversight.', category: 'facilities', icon: 'üè¢', iconClass: 'icon-facilities', file: 'Facilities Management Software- PPN.html', size: '5.6KB', lines: 142, client: 'Public Sector' },
            { id: 'lone-worker', title: 'Lone Worker Solutions', description: 'Safety monitoring and alert systems for lone workers with real-time tracking.', category: 'safety', icon: 'üö®', iconClass: 'icon-safety', file: 'Lone Worker Solutions.html', size: '5.2KB', lines: 105, client: 'Various Organizations' },
            { id: 'zev-fleet', title: 'ZEV Fleet Analysis Tool', description: 'Zero-emission vehicle fleet transition planning tool with scenario analysis.', category: 'transport', icon: '‚ö°', iconClass: 'icon-transport', file: 'zev_fleet_analysis_customer_fit_one_pager_html.html', size: '14KB', lines: 249, client: 'Fleet Operators' }
        ];

        let currentCategory = 'all';
        let filteredProposals = [...proposals];

        document.addEventListener('DOMContentLoaded', function() {
            renderProposals();
        });

        function renderProposals() {
            const grid = document.getElementById('cards-grid');
            grid.innerHTML = '';

            filteredProposals.forEach(proposal => {
                const card = document.createElement('div');
                card.className = 'card';
                card.onclick = () => showProposal(proposal);

                card.innerHTML = `
                    <div class="card-header">
                        <div class="card-icon ${proposal.iconClass}">${proposal.icon}</div>
                        <div class="card-title">${proposal.title}</div>
                    </div>
                    <div class="card-description">${proposal.description}</div>
                    <div class="card-meta">
                        <span>${proposal.size}</span>
                        <span>${proposal.lines} lines</span>
                    </div>
                `;

                grid.appendChild(card);
            });
        }

        function showCategory(category) {
            currentCategory = category;
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (category === 'all') {
                filteredProposals = [...proposals];
            } else {
                filteredProposals = proposals.filter(proposal => proposal.category === category);
            }
            renderProposals();
        }

        function showProposal(proposal) {
            document.getElementById('main-content').style.display = 'none';
            document.getElementById('proposal-view').style.display = 'block';
            
            // Try to load the actual proposal content
            loadProposalContent(proposal);
        }

        async function loadProposalContent(proposal) {
            const contentDiv = document.getElementById('proposal-content');
            
            // Show loading state
            contentDiv.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading ${proposal.title}...</p>
                </div>
            `;

            try {
                // Try to fetch the HTML file content
                const response = await fetch(proposal.file);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const html = await response.text();
                
                // Extract the body content from the HTML
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const bodyContent = doc.body.innerHTML;
                
                                 // Display the content with better styling isolation
                 contentDiv.innerHTML = `
                     <div style="padding: 20px; max-height: calc(100vh - 200px); overflow-y: auto; background: white; border-radius: 10px; position: relative;">
                         <div style="position: relative; z-index: 1;">
                             ${bodyContent}
                         </div>
                     </div>
                 `;
                 
                 // Add CSS to isolate proposal content styling
                 const style = document.createElement('style');
                 style.textContent = `
                     #proposal-content * {
                         font-family: inherit !important;
                         box-sizing: border-box !important;
                     }
                     #proposal-content {
                         background: white !important;
                         color: #333 !important;
                     }
                     #proposal-content h1, #proposal-content h2, #proposal-content h3 {
                         color: #667eea !important;
                         margin-bottom: 15px !important;
                     }
                     #proposal-content p {
                         line-height: 1.6 !important;
                         margin-bottom: 10px !important;
                     }
                     #proposal-content ul, #proposal-content ol {
                         margin-left: 20px !important;
                         margin-bottom: 15px !important;
                     }
                     #proposal-content li {
                         margin-bottom: 5px !important;
                     }
                     #proposal-content .card, #proposal-content .section {
                         background: #f8f9fa !important;
                         padding: 15px !important;
                         border-radius: 8px !important;
                         margin-bottom: 15px !important;
                     }
                 `;
                 document.head.appendChild(style);
                
            } catch (error) {
                console.error('Error loading proposal:', error);
                
                                 // Fallback: Show proposal details and download link
                 contentDiv.innerHTML = `
                     <div style="text-align: center; padding: 40px;">
                         <h2 style="color: #667eea; margin-bottom: 20px;">${proposal.title}</h2>
                         
                         <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px; text-align: left;">
                             <h4>üìã Proposal Details:</h4>
                             <ul style="margin-top: 10px;">
                                 <li><strong>File:</strong> ${proposal.file}</li>
                                 <li><strong>Size:</strong> ${proposal.size}</li>
                                 <li><strong>Lines:</strong> ${proposal.lines}</li>
                                 <li><strong>Client:</strong> ${proposal.client}</li>
                                 <li><strong>Category:</strong> ${proposal.category}</li>
                             </ul>
                         </div>
                         
                         <div style="background: #e8f4fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                             <h4>üìÑ Proposal Description:</h4>
                             <p style="margin-top: 10px; line-height: 1.6;">${proposal.description}</p>
                         </div>
                         
                         <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                             <button onclick="window.open('${proposal.file}', '_blank')" style="background: #667eea; color: white; border: none; padding: 12px 24px; border-radius: 25px; cursor: pointer; font-weight: 600;">
                                 üìÑ Open Full Proposal
                             </button>
                             <button onclick="downloadFile('${proposal.file}')" style="background: #28a745; color: white; border: none; padding: 12px 24px; border-radius: 25px; cursor: pointer; font-weight: 600;">
                                 üíæ Download Proposal
                             </button>
                         </div>
                         
                         <p style="margin-top: 20px; color: #666; font-size: 0.9em;">
                             üí° <strong>Tip:</strong> Click "Open Full Proposal" to view the complete document in a new tab, 
                             or "Download Proposal" to save it to your device.
                         </p>
                         
                         <div style="margin-top: 30px; padding: 15px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px;">
                             <p style="margin: 0; color: #856404; font-size: 0.9em;">
                                 <strong>Note:</strong> The original proposal styling may appear differently when embedded. 
                                 For the best viewing experience, use "Open Full Proposal" to see the document in its original format.
                             </p>
                         </div>
                     </div>
                 `;
            }
        }

        function downloadFile(filename) {
            const link = document.createElement('a');
            link.href = filename;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function showMainContent() {
            document.getElementById('proposal-view').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
        }
    </script>
</body>
</html>
